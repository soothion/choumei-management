<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <title>臭美管理后台</title>
		<script type="text/javascript" src="../../js/include.js"></script>
        <style>
		/*
        ul{
          width: 20%;
          min-width: 250px;    
          margin-right: 10px;  
          border-radius: 3px;
          background: #fff;
          position:absolute;
          z-index: 1000;
          border: 1px solid #E6EAF2;
          display: none;
        }

        ul > li{
          height: 25px;
          line-height: 25px;
          padding:5px 10px;
          cursor: pointer; 
          overflow: hidden;
          white-space: nowrap;     
        }

        ul > li:hover{
            background: #eee;
        }

        .active{
           background: #eee; 
        }*/
        </style>
    </head>

    <body>
        <div class="breadcrumb">
            <a class="link" href="ui.html">一级导航</a>
            <span>&gt;</span>
            <a class="link" href="ui.html">二级导航</a>
            <span>&gt;</span>新增店铺账号
        </div>

        <div class="wrapper">
            <form novalidate="" method="post" class="form-vertical" data-role="form" action="/data/post.json">
               <legend>账号信息</legend>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>店铺名称：</label>
                    <div id="shopNameControl" class="control" style="position: relative">
                        <input id="shopNameSelect" type="text" data-value="">
                        <ul>
                            <li>2015高考成绩查询11111111111111111111111111111111</li>
                            <li>2015中考成绩查询</li>
                            <li>2015节日放假按</li>
                            <li>2015ssssssssss</li>
                            <li>2015ggggggggggg</li>
                        </ul>
                    </div>
                </div> 
				 <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>店铺名称：</label>
                    <div class="control complete">
                        <input type="text" ajat-complete="list/city#domid=complete-position&tempid=complete-position-t" autocomplete="off">
						<div class="complete-position" id="complete-position" style="width:250px;">
							<script type="text/template" id="complete-position-t">
							
							<ul>
								<%for(var i=0;i<data.length;i++){%>
								<li class="complete-item"><%=data[i].title%></li>
								<%}%>
							</ul>
							</script>
						</div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>所属商户：</label>
                    <div class="control">
                        <input type="text" disabled>
                    </div>
                </div>

                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>用户名：</label>
                    <div class="control">
                        <input type="text">
                    </div>
                </div>  

                <div class="control-group">
                    <label class="control-label" for=""></label>
                    <input type="radio" name="sex" class="radio" id="radio1"><label for="radio1">普通用户</label>
                    <input type="radio" name="sex" class="radio" id="radio2"><label for="radio2">超级管理员</label>
                </div>

                <div class="control-group">
                    <label class="control-label" for=""></label>
                    <button class="btn-primary">提交</button>
                </div>                                                                  
            </form>        
        </div>
        <script>
            $("#shopNameSelect").on('input',function(e){
                var parent = $(this).parent();
                $("ul",parent).show();
            })

            $("#shopNameSelect").on('click',function(e){
                var parent = $(this).parent();
                $("ul",parent).show();
            })

            $(document).on('click',function(e){
                 var t = $(e.target);
                 if(t.attr('id') === 'shopNameSelect') return;
                 $("#shopNameControl > ul").hide();
            })

            $(document).on('keyup',function(e){
                var input  = $("#shopNameSelect");
                var parent = input.parent();
                var ul = $("ul",parent);
                if(e.keyCode == 38 && ul.css('display') === 'block'){
                    var elemnt = $(".active",ul);
                    if(elemnt.length > 0){
                        elemnt.removeClass("active");
                        var ele = elemnt.prev();
                        if(ele.length > 0){
                            ele.addClass("active");
                            $("#shopNameSelect").val(ele.text());
                        }else{
                            $("#shopNameSelect").val($("#shopNameSelect").attr('data-value'))
                        }                        
                    }else{
                        $("li",ul).last().addClass("active");
                        var val = $("#shopNameSelect").val();
                        $("#shopNameSelect").attr('data-value',val);
                        $("#shopNameSelect").val($(".active",ul).text());                        
                    }
                }

                if(e.keyCode == 40 && ul.css('display') === 'block'){
                    var elemnt = $(".active",ul);
                    if(elemnt.length > 0){
                        elemnt.removeClass("active");
                        var ele = elemnt.next();
                        if(ele.length > 0){
                            ele.addClass("active");
                            $("#shopNameSelect").val(ele.text());
                        }else{
                            $("#shopNameSelect").val($("#shopNameSelect").attr('data-value'))
                        }                        
                    }else{
                        $("li",ul).first().addClass("active");
                        var val = $("#shopNameSelect").val();
                        $("#shopNameSelect").attr('data-value',val);
                        $("#shopNameSelect").val($(".active",ul).text());                        
                    }                    
                }
            })

            $("#shopNameControl").delegate('li', 'click', function(event) {
                var val = $(this).text();
                $("#shopNameSelect").val(val);
                $("#shopNameSelect").attr("data-vale",val);
                $(this).parent().hide();
            });
            
        </script>
    </body>
</html>