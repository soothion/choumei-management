<!DOCTYPE html>
<html lang="zh-CN">
  <head>
      <meta charset="utf-8">
	  <title>臭美管理后台</title>
	  <script type="text/javascript" src="../../js/include.js"></script>
  </head>
  <body>
		<div class="breadcrumb">
		<a href="ui.html">系统管理</a><span>&gt;</span><a href="ui.html">系统管理</a><span>&gt;</span><span id="breadcrumb-current">新增用户</span>
			<div class="flex-box">
			<div class="flex-item">
				<h4>新增用户</h4>
			</div>		 
		</div>
		<hr />
	</div>
	
	<div class="wrapper" ajat="<%if(query.id){%>user/show/<%=query.id%><%}%>#domid=form&tempid=form-t" id="form">
		<script type="text/template" id="form-t">
		<form novalidate method="post" class="form-vertical" data-role="form" action="<%if(query.id){%>user/update/<%=data.id%><%}else{%>user/create<%}%>">
			<%if(query.id){%>
				<input type="hidden" ajat-sync-selector="#breadcrumb-current" value="编辑用户" />
				<input type="hidden" ajat-sync-selector="#titlt-msg" value="" />
				<input type="hidden" ajat-sync-selector="#user_name" value="<%data.username||""%>" />
				<input type="hidden" ajat-sync-selector="#name" value="<%data.name||""%>" />
				<input type="hidden" ajat-sync-selector="#title-password" value="" ><input class="checkbox" type="checkbox" id="switch" /><label for="switch">重置密码</label>				  		
			<%}%>
		 <div class="control-group">
                    <legend class="add-title" style="margin-left:70px;" id="titlt-msg">基本信息：</legend>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>登陆账号：</label>
                    <div class="control">
                        <input type="text" patternmsg="账号为邮箱格式，不包@choumei.cn" pattern="email"  required="" value="<%=data.username||""%>" name="username" id="user_name">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>用户姓名：</label>
                    <div class="control">
                        <input type="text" required="" value="<%=data.name||""%>" name="name" id="name">
                        <span class="control-help" style="display: none;">未填写</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>联系手机：</label>
                    <div class="control">
                        <input type="text" patternmsg="手机号码输入不正确" pattern="mobile" requiredmsg="请输入手机号码" required="" name="tel" value="<%=data.tel||""%>">
						<span class="control-help" style="display: none;">请输入手机号码</span>
                    </div>
                </div>
			<div class="control-group">
				<label class="control-label" for=""><span class="red">*</span>所属部门：</label>
				<div class="control">
					<select required name="department_id" class="select" ajat="list/department#domid=department&tempid=department-t&sid=<%=data.department_id%>" id="department" >
					</select>
				</div>
			</div>
		<div class="control-group">
				<label class="control-label" for=""><span class="red">*</span>职位：</label>
				<div class="control">
					<select required name="position_id" class="select" ajat="list/position#domid=position&tempid=position_t&sid=<%=data.position_id%>" id="position" >
					</select>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for=""><span class="red">*</span>所属城市：</label>
				<div class="control">
					<select required name="city_id" class="select" ajat="list/city#domid=city&tempid=city-t&sid=<%=data.city_id%>" id="city">
					</select>
				</div>
			</div>
			 
			<div class="control-group">
				<label class="control-label" for=""><span class="red">*</span>角色状态：</label>
				<div class="control">
					<select required name="status" class="select" >
						<option value="1" <%=data.status==1?"selected":""%>>正常</option>
						<option value="2" <%=data.status==2?"selected":""%>>停用</option>
						<option value="3" <%=data.status==3?"selected":""%>>注销</option>
					</select>
				</div>
			</div>
			  <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>配置权限：</label>
                    <div class="control">
                        <input type="checkbox" value="1" class="checkbox" id="checkbox1" ><label for="checkbox1">基本角色（默认）</label>

                        <input type="checkbox" value="2" class="checkbox" id="checkbox2" ><label for="checkbox2">系统管理员</label>

                        <input type="checkbox" value="3" class="checkbox" id="checkbox3"><label for="checkbox3">商务人员</label><br/>

                        <input type="checkbox" value="4" class="checkbox" id="checkbox4"><label for="checkbox4">产品经理</label>

                        <input type="checkbox" value="5" class="checkbox" id="checkbox5"><label for="checkbox5">商务主管</label>
                         <div class="control-help"></div>
                    </div>
                </div>
                <div class="control-group">
                    <legend class="add-title" style="margin-left:70px;" id="title-password">设置密码：</legend>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>登陆密码：</label>
                    <div class="control">
                        <input id="password" type="password" patternmsg="6-20位数字和字母组合" pattern="password" requiredmsg="请输入密码" required="" placeholder="6-20位数字和字母组合" name="password" value="<%=data.password||""%>">
                        <span class="control-help" style="display: none;">请输入密码</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for=""><span class="red">*</span>确认登录密码：</label>
                    <div class="control">
					<input type="password" match="password" matchmsg="确认密码与密码不一致" pattern="password" requiredmsg="请输入确认密码" required="" name="confirm"></div>
                </div>
				<div class="control-group">
				<label class="control-label" for=""></label>
				<div class="control"><button class="btn-primary" type="submit">提交</button></div>
			</div>
		  </form>
		  </script>
	</div>
	
	<script type="text/template" id="department-t">
		<%for(var i=0;i<data.length;i++){%>
			<option <%=data[i].id==protocol.custom.sid?"selected":""%> value="<%=data[i].id%>"><%=data[i].title%></option>
		<%}%>
	</script>
	<script type="text/template" id="position_t">
		<%for(var i=0;i<data.length;i++){%>
			<option <%=data[i].id==protocol.custom.sid?"selected":""%> value="<%=data[i].id%>"><%=data[i].title%></option>
		<%}%>
	</script>
	 <script type="text/javascript">
        $(document.body).on('change','#switch',function(){
            if($(this).is(':checked')){
                $('input[type="password"]').removeAttr('disabled');
            }else{
                $('input[type="password"]').attr('disabled',true);
            }
        })
    </script>
	<script type="text/template" id="city-t">
		<%for(var i=0;i<data.length;i++){%>
			<option <%=data[i].id==protocol.custom.sid?"selected":""%> value="<%=data[i].id%>"><%=data[i].title%></option>
		<%}%>
	</script>
	<script type="text/javascript">
		$(function(){			 
			$('input[type="date"]').val(lib.getDate());
			$('form').submit();
		});
	</script>
	 
  </body>
</html>