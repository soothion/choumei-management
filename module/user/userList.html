<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="format-detection" content="telephone=no">
        <title>臭美管理后台</title>
        <script type="text/javascript" src="../../js/include.js"></script>

    </head>
    <body>
        <div class="breadcrumb">
            <a>系统管理</a><span>&gt;</span><a href="userList.html">用户管理</a>
			<div class="flex-box">
			 <div class="flex-item">
				<h4>用户管理</h4>
			</div>
			<div>
				<a class="btn-primary" href="addUser.html"><i class="fa fa-plus"></i>新增</a>
				 
			</div>
		 </div>
		 
        </div>		
        <div class="wrapper">
            <div class="flex-box">
                <div class="flex-item">
                    <form data-role="hash">
                        
                           <div class="input-group">
							<select class="select border-none" id="select"  >
								<option value="1">登录账号</option>
								<option value="2">角色名称</option>
								<option value="3">用户姓名</option>
							</select>
							<input type="text" name="username" class="border-none" placeholder="请输入登录账号">
							<input type="text" name="role" class="border-none hide" placeholder="请输入角色名称">
							<input type="text" name="name" class="border-none hide" placeholder="请输入用户名称">
							
						</div>
						<span class="space"></span>
                            <label>所属部门</label>
                             <select name="department_id" class="select" ajat-one="true" ajat="list/department#domid=department&tempid=department-t" id="department">
							<script type="text/template" id="department-t">
								<option value="">全部</option>
								<%for(var i=0;i<data.length;i++){%>
									<option value="<%=data[i].id%>"><%=data[i].title%></option>
								<%}%>
							</script>
						</select>
						
						 
							<span class="space"></span>
                            <label>状态</label>
                            <select class="select" name="status">
							<option value="0">全部</option>
                                <option value="1">正常</option>
                                <option value="2">注销</option>
                                <option value="3">停用</option>                             
                            </select>
							<span class="space"></span>
                            <label>所属城市</label>
                            <select class="select" name="city_id" ajat-one="true" ajat="list/city#domid=city&tempid=city-c" id ="city">
                               <script type="text/template" id="city-c">
							   <option value="">全部</option>
							   <%for(var i=0;i<data.length;i++){%>
							   <option value="<%=data[i].id%>"><%=data[i].title%></option>
							   <%}%>
							   </script>
                            </select>
							<span class="space"></span>
                            添加时间
							<span class="date-group">
							<input type="date" data-role="start" name="start"/>到<input type="date" data-role="end" name="end"/>
							</span>
                            <button class="btn">搜索</button>
							</form>
                          <form action="user/export" data-role="export"><button class="btn" type="submit" data-slug="user.export"><i class="fa fa-file-excel-o"></i> 导出</button></form>
                                  
                </div>              
            </div>
           <div class="table" ajat="user/index?<%=query._%>#domid=table&tempid=table-t" id="table">
			<script type="text/template" id="table-t">
                <table>
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>用户姓名</th>
                            <th>登陆账号</th>
                            <th>状态</th>
                            <th>所属部门</th>
                            <th>所属区域</th>
                            <th>角色名称</th>
                            <th><a data-role="hash" href="#page=1&sort_key=created_at&sort_type=<%=query.sort_type=="desc"?"asc":"desc"%>">添加时间 <i class="fa fa-sort"></i></a></th>
					 
                            <th>操作</th>
                        </tr>
                    </thead>
                <tbody>
				<%var status=["","正常","注销","停用"]%>
				<%var data=data.data%>
				<%for(var i=0;i<data.length;i++){%>
                 <tr>
                 <td><%=i+1%></td>
                  <td><%=data[i].name%></td>
				  <td><%=data[i].username%></td>
                  <td><%=status[data[i].status]%></td>
                  <td><%=data[i].department?data[i].department.title:""%></td>
				  <td><%=data[i].city?data[i].city.title:""%></td>			   
				  <td><%for(var j=0;j<data[i].roles.length;j++){%>
				      <%=data[i].roles[j].name%>
					  <%}%>					 
				   </td>				  
				  <td><%=data[i].created_at%></td>
                  <td><a class="link" href="addUser.html?id=<%=data[i].id%>" data-slug="user.show">查看</a></td>
                  </tr>
				  <%}%>
                </tbody>
            </table>		
             <div class="pager"> </div>
			</script>
        </div>
            </div>
			<script type="text/javascript">
		$(function(){
			$('#select').on('change',function(){
				var $this=$(this);
				var input1=$('input[name="username"]');
			    var input2=$('input[name="role"]');
				var input3=$('input[name="name"]');
				if($this.val()==1){
				input1.show();
				input2.hide().val('');
				input3.hide().val('');
					$this.next().attr('placeholder','请输入登录账号');
				}else if ($this.val()==2){
				input2.show();
				input1.hide().val('');
				input3.hide().val('');
					$this.next().attr('placeholder','请输入角色名称');
				}else if($this.val()==3){
				input3.show();
				input1.hide().val('');
				input2.hide().val('');
				  $this.next().attr('placeholder','请输入用户姓名');
				}
			});			 
		});
	</script>
	 
    </body>
</html>