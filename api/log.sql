CREATE TABLE `cm_commission` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `ordersn` varchar(20) CHARACTER SET utf8 NOT NULL DEFAULT '',
  `salonid` int(11) DEFAULT NULL,
  `sn` varchar(15) CHARACTER SET utf8 NOT NULL DEFAULT '',
  `amount` decimal(10,2) NOT NULL,
  `rate` decimal(4,2) NOT NULL DEFAULT '0.00',
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `grade` tinyint(2) DEFAULT NULL COMMENT '店铺当前等级 1特级店2A级店3B级店4C级店4淘汰店',
  PRIMARY KEY (`id`),
  UNIQUE KEY `commission_sn_unique` (`sn`)
) ENGINE=InnoDB AUTO_INCREMENT=1988 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `cm_rebate` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `salon_id` int(11) NOT NULL,
  `sn` varchar(15) COLLATE utf8_unicode_ci NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `status` tinyint(4) NOT NULL,
  `start_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `end_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `confirm_by` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL,
  `confirm_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `created_by` varchar(20) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `created_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  PRIMARY KEY (`id`),
  UNIQUE KEY `rebase_sn_unique` (`sn`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `cm_permissions` (`id`, `inherit_id`, `title`, `slug`, `status`, `description`, `note`, `sort`, `show`, `created_at`, `updated_at`)
VALUES
  (56, NULL, '财务管理', '', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (57, 56, '收入管理', '', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (58, 57, '佣金单', 'commission.index', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (59, 57, '返佣单', 'rebate.index', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (60, 56, '收款管理', '', 1, NULL, NULL, NULL, 1, '2015-08-26 14:54:01', '0000-00-00 00:00:00'),
  (61, 60, '收款列表', 'receivables.index', 1, NULL, NULL, NULL, 1, '2015-08-26 14:55:25', '0000-00-00 00:00:00'),
  (63, 61, '添加收款', 'receivables.save', 1, NULL, NULL, NULL, 2, '2015-08-26 14:56:05', '0000-00-00 00:00:00'),
  (64, 59, '创建返佣单', 'rebate.create', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (65, 61, '修改收款', 'receivables.update', 1, NULL, NULL, NULL, 2, '2015-08-26 14:56:29', '0000-00-00 00:00:00'),
  (66, 59, '查看返佣单', 'rebate.show', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (67, 61, '确认收款', 'receivables.confirmAct', 1, NULL, NULL, NULL, 2, '2015-08-26 14:56:55', '0000-00-00 00:00:00'),
  (68, 59, '导出返佣单', 'rebate.export', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (69, 61, '收款导出', 'receivables.export', 1, NULL, NULL, NULL, 2, '2015-08-26 14:57:30', '0000-00-00 00:00:00'),
  (70, 59, '确认返佣单', 'rebate.confirm', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (71, 61, '收款详情', 'receivables.getone', 1, NULL, NULL, NULL, 2, '2015-08-26 14:58:01', '0000-00-00 00:00:00'),
  (72, 61, '删除收款', 'receivables.del', 1, NULL, NULL, NULL, 2, '2015-08-26 14:58:20', '0000-00-00 00:00:00'),
  (73, 59, '上传返佣单', 'rebate.upload', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (74, 59, '删除返佣单', 'rebate.destory', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (75, 58, '导出佣金单', 'commission.export', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (76, 58, '查看佣金单', 'commission.show', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (77, 59, '更新返佣单', 'rebate.update', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (82, 56, '付款管理', '', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (83, 82, '付款列表', 'pay_manage.index', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (84, 82, '查看付款详情', 'pay_manage.show', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (85, 82, '新增付款单', 'pay_manage.create', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (86, 82, '修改付款单', 'pay_manage.update', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (87, 82, '删除付款单', 'pay_manage.destroy', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (88, 82, '付款单审批', 'pay_manage.check', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (89, 82, '付款单确认', 'pay_manage.confirm', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (90, 82, '付款单导出', 'pay_manage.export', 1, NULL, NULL, NULL, 2, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (91, 82, '付款单审批列表', 'pay_manage.check_list', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00'),
  (92, 82, '付款单确认列表', 'pay_manage.confirm_list', 1, NULL, NULL, NULL, 1, '0000-00-00 00:00:00', '0000-00-00 00:00:00');
