<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">       
        <title>臭美管理后台</title>
        <script type="text/javascript" src="/js/include.js"></script>

        <style>
          .box-warpper{
            position:relative;
            margin:15px;          
          }

          .banner{
            display: inline-block;
            margin:10px;
            width:25%;
            height:370px;
            min-width:320px;            
            overflow: hidden;
            border:1px solid  #ddd;
          }

          ul{
            display:inline-block;
            min-width:300px;
            padding:5px 10px;
            width:95%;
          }

          ul li{
            padding:5px 2px;
            overflow: hidden;
          }

          .fl{
            float:left;
          }

          .fr{
            float:right;
          }

          .fr a{
            margin:0 10px;
          }

          .mr{
            margin: 10px 0;
          }

          li div img{
           width:100%;
           height:120px;
          }

          li div label{
            display:inline-block;
            min-width:110px;
            width:30%;
          }

          li div input{
            min-width:100px;
            width:55%;
          }

          .add-button{
              height: 320px;
              line-height: 320px;
              text-align: center;
          }

          #banner-button{
            cursor:pointer;
          }

          .plus-button{
            display: inline-block;
            margin:10px;
            height:370px;
            width:25%;
            min-width:320px;  
            overflow: hidden;          
            border:1px solid  #ddd;            
          }

          .move{
            cursor:move;
          }

          .operation{
            position:absolute!important;
            bottom:0px;
            left:0px;
            width:100%;
            height:32px;
            background:rgba(0,0,0,0.5);
            color:#ddd;
            line-height:32px;
            text-align:center;
            -webkit-transition:all 0.2s ease 0s;
            -moz-transition:all 0.2s ease 0s;
            transition:all 0.2s ease 0s;
          }

          .operation{
            font-size:1.5rem;
            height:0px;
            overflow:hidden;
            cursor: pointer;
          } 

          .thumbnails-item{
            position:relative;
            line-height: 120px;
            height:120px;
            text-align: center;             
          }

          .dashed{
            border:1px dashed #ddd;
          }

          .thumbnails-item:hover .operation{
              height:32px;
          }

          .hidden{
             display:none!important;
          }
          label>input[type="radio"][disabled]+span{
            opacity: 1;
            cursor: inherit;
            background-color: #fff;            
          }
          select:disabled,input:disabled{
            cursor: inherit; 
            background:none;             
          }
          .background{
            opacity: 1;
            border:none;
            background-color: #fff!important;      
          }          
        
        </style>
    </head>
    <body>
        <div class="breadcrumb">
            <a>韩式定妆</a><span>&gt;</span><a href="homeBanner.html">主页Banner</a>    
        </div>

        <div class="box-warpper" ajat="banner/index?type=1#domid=warpper&tempid=warpper-t" id="warpper">
            <script type="text/template" id="warpper-t">
              <%data.data && data.data.forEach(function(item,i){%>
              <form data-role="form" class="banner move" draggable="true" id="form<%=i%>">
                  <ul>
                      <li>
                          <div class="fl"><h3><strong>Banner<%=i+1%></strong></h3></div>
                          <div class="fr">
                              <button class='link save hidden'>保存</button>
                              <a class='link canncel hidden'>取消</a>
                              <a class='link edit'>编辑</a>
                              <a class='link del' id="<%=item.banner_id%>">删除</a>
                              <input type="hidden" name="id" value="<%=item.banner_id%>">
                              <input type="hidden" name="type" value="1">
                          </div>
                      </li>

                      <li>
                          <div class="thumbnails-item">
                              <div class="thumbnails-item-btn" style="display:none">
                                  <button type="button" class="btn-primary" id="uploader<%=i%>">上传</button>
                              </div>

                              <div class="thumbnails-item-img">
                                  <img src='<%=item.image%>'>
                                  <input type="hidden" name="image" value='<%=item.image%>' required>
                                  <div class="operation hidden">
                                      <i class="fa fa-pencil-square-o"></i>
                                  </div>
                              <div>                                  
                          </div>                        
                      </li>

                      <li style="border-top:1px solid #ddd;">
                          <div class="mr">
                              <label><span>标题</span></label>
                              <input type="text" name="name" placeholder="1~20个字符，必填" value="<%=item.name%>" 
                              disabled class="background" required maxLength="20"/>
                          </div>

                          <div class="mr radios">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="1" <%=item.behavior=="1" ? "checked" : ""%> disabled/>
                                  <span>h5链接</span>
                              </label>

                              <input type="text" name="url" class="<%=item.behavior=='1'?'background':'hidden'%>" placeholder="输入h5链接地址，带http://" value="<%=item.behavior=='1' ? item.url : ''%>" disabled required/>
                          </div>

                          <div class="mr radios">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="2" <%=item.behavior=="2" ? "checked" : ""%> disabled />
                                  <span>App内部链接</span>
                              </label>

                              <%if(item.behavior=="2"){ var url = JSON.parse(item.url);%>
                                  <select name="url" style="width:26.5%" disabled class="background" url=<%=item.url%>>                                    
                                  </select>

                                  <input type="text" style="width:26.5%" disabled placeholder="店铺名称1~15个字" class="background <%=url.type=='salons'?'':'hidden'%>" value="<%=item.name%>" required
                                    name="salonname"/>
                              <%}else{%>
                                  <select name="url" style="width:26.5%;" disabled class="hidden">

                                  </select>
                                  <input type="text" style="width:26.5%" class="hidden" disabled maxLength="15" 
                                  placeholder="店铺名称1~15个字" name="salonname" required/>
                              <%}%>
                          </div>

                          <div class="mr">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="3" <%=item.behavior=="3" ? "checked":""%> disabled/>
                                  <span>无跳转</span>
                              </label>
                          </div>
                      </li>
                  </ul>             
              </form>
            <%})%> 

            <%if(data.data && data.data.length < 10){%>          
            <div class="plus-button">
                <ul>
                    <li>
                        <div style="text-align:center;margin-top:100px;">
                            <button type="button">
                                <span style="font-size: 4rem;color:#ddd;">+</span><br>
                                <span style="font-size: 15px;color:#ddd;font-weight:900;">添加</span>
                            </button>
                        </div>
                    </li>
                </ul>             
            </div>
            <%}%> 

            <form data-role="form" class="banner template" style="display:none" draggable="true">
                <ul>
                    <li>
                        <div class="fl"><h3><strong></strong></h3></div>
                        <div class="fr">
                            <button class='link save'>保存</button>
                            <a class='link canncel'>取消</a>
                            <a class='link edit hidden'>编辑</a>
                            <a class='link del'>删除</a>
                            <input type="hidden" name="id" value="">
                            <input type="hidden" name="type" value="1">
                        </div>
                    </li>

                    <li>
                        <div class="thumbnails-item">
                            <div class="thumbnails-item-btn">
                                <button type="button" class="btn-primary uploader">上传</button>
                            </div>                                 
                        </div>                        
                    </li>

                    <li style="border-top:1px solid #ddd;">
                        <div class="mr">
                            <label><span>标题</span></label>
                            <input type="text" name="name" placeholder="1~20个字符，必填" required maxLength="20"/>
                        </div>

                        <div class="mr radios">
                            <label class="radio">
                                <input type="radio" name="behavior" value="1" checked/>
                                <span>h5链接</span>
                            </label>
                            <input type="text" name="url" placeholder="输入h5链接地址，带http://" required/>
                        </div>

                        <div class="mr radios">
                            <label class="radio">
                                <input type="radio" name="behavior" value="2"/>
                                <span>App内部链接</span>
                            </label>

                            <select name="url" id="select" style="width:26.5%;" disabled >

                            </select>

                            <input type="text" name="salonname" style="width:26.5%" placeholder="店铺名称1~15个字" maxLength='15' disabled required/>
                        </div>

                        <div class="mr">
                            <label class="radio">
                                <input type="radio" name="behavior" value="3"/>
                                <span>无跳转</span>
                            </label>
                        </div>
                    </li>
                </ul>             
            </form>                                                                                
            </script>            
        </div>
        <script src="homeBanner.js"></script>
    </body>
</html>