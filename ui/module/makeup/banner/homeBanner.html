<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">       
        <title>臭美管理后台</title>
        <script type="text/javascript" src="/js/include.js"></script>

        <style>
          .box-warpper{position:relative;margin:15px;}

          .banner{
            display: inline-block;
            margin:10px;
            width:28%;
            min-width:350px;            
            border:1px solid  #ddd;
          }
          ul{display:inline-block;padding:10px;width:95%}
          ul li{padding:5px 0;position:relative}
          .clearfix:after{
            content: "020"; 
            display: block; 
            height: 0; 
            clear: both; 
            visibility: hidden;  
          }
          .clearfix {
            zoom: 1; 
          }
          .fl{float:left;}
          .fr{float:right;}
          .fr a{margin:0 10px;}

          li div img{
           width:168px;
           height:120px;
          }
          li div label{
            display:inline-block;
            min-width:110px;
          }
          li div input{
            width:60%;
            min-width:100px;
          }
          .add-button{
            height: 320px;
            line-height: 320px;
            text-align: center;
          }

          #banner-button{
            cursor:pointer;
          }

          .plus-button{
            display: inline-block;
            margin: 10px;
            height: 362px;
            line-height: 362px;
            width: 28%;
            min-width: 350px;
            border: 1px solid #ddd;
            position: relative;
            vertical-align: top;          
          }

          .plus-button button{
            display: inline-block;
            width:100%;
            height:100%;
          }

          .move{
            cursor:move;
          }
          .operation{
            position:absolute!important;
            bottom:0px;
            left:0px;
            width:100%;
            height:32px;
            background:rgba(0,0,0,0.5);
            color:#ddd;
            line-height:32px;
            text-align:center;
            -webkit-transition:all 0.2s ease 0s;
            -moz-transition:all 0.2s ease 0s;
            transition:all 0.2s ease 0s;
          }
          .operation{
            font-size:1.5rem;
            height:0px;
            overflow:hidden;
            cursor: pointer;
          } 

          .thumbnails-item{
            position:relative;
            line-height: 120px;
            height:120px;
            text-align: center;             
          }

          .dashed{
            border:1px dashed #ddd;
          }

          .thumbnails-item:hover .operation{
            height:32px;
          }

          label>input[type="radio"][disabled]+span{
            opacity: 1;
            cursor: inherit;
            background-color: #fff;          
          }     
          select:disabled,input:disabled{
            cursor: inherit; 
            background:none;             
          }
          .background{
            opacity: 1;
            border:none;
            background-color: #fff!important;      
          } 

          .hidden{
             display:none!important;
          }

          select{
            width:29.5%!important;
          }

          .control{
            width:29.5%;
            position: absolute;
          } 

          .complete{
            display:inline-block;
          }

          .control input{
            width:100%;
            min-width: 100px;
          }

          .control > div{
             min-width: 100%;
             width: 200%;
          }

          .radios{
            position: relative;
            margin: 10px 0;
          }
          .inputBox{
            border-top:1px solid #ddd;
            padding-left:5px;
          }
        
        </style>
    </head>
    <body>
        <div class="breadcrumb">
            <a>韩式定妆</a><span>&gt;</span><a href="homeBanner.html">主页Banner</a>    
        </div>

        <div class="box-warpper" ajat="banner/index?type=1#domid=warpper&tempid=warpper-t" id="warpper">
            <script type="text/template" id="warpper-t">
              <%data.data && data.data.forEach(function(item,i){%>
              <form data-role="form" class="banner move" draggable="true" id="<%=item.banner_id%>" url="<%=item.image%>">
                  <ul>
                      <li class="clearfix">
                          <div class="fl"><h3><strong>Banner<%=i+1%></strong></h3></div>
                          <div class="fr">
                              <button class='link save hidden'>保存</button>
                              <button type="reset" class='link canncel hidden'>取消</button>
                              <button type="button" class='link edit' data-slug="banner.edit">编辑</button>
                              <a class='link del' id="<%=item.banner_id%>" data-slug="banner.destroy">删除</a>
                              <input type="hidden" name="id" value="<%=item.banner_id%>">
                              <input type="hidden" name="type" value="1">
                          </div>
                      </li>

                      <li>
                                                
                          <div class="thumbnails-item">
                              <div class="thumbnails-item-btn" style="display:none">
                                  <button type="button" class="btn-primary" id="uploader<%=i%>">上传</button>
                              </div>

                              <div class="thumbnails-item-img">
                                  <img src='<%=item.image%>'>
                                  <input type="hidden" name="image" value='<%=item.image%>' required>
                                  <div class="operation hidden">
                                      <i class="fa fa-pencil-square-o"></i>
                                  </div>
                              <div>                             
                          </div>  
                      </li>

                      <li style="padding:0"><span class="control-help imageTip" style="display:none">请先上传图片</span></li>

                      <li class="inputBox">
                          <div class="radios">
                              <label><span>题目：</span></label>
                              <input id="title" type="text" name="name" placeholder="1~20个字符，必填" value="<%=item.name%>" 
                              disabled  required maxLength="20"/>
                          </div>

                          <div class="radios">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="1" <%=item.behavior=="1" ? "checked" : ""%> disabled/>
                                  <span>h5链接</span>
                              </label>

                              <input id="h5url" type="text" name="url" class="<%=item.behavior=='1'?'':''%>" placeholder="输入h5链接地址，带http://" value="<%=item.behavior=='1' ? item.url : ''%>" disabled required/>
                          </div>

                          <div class="radios">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="2" <%=item.behavior=="2" ? "checked" : ""%> disabled />
                                  <span>App内部链接</span>
                              </label>

                              <%if(item.behavior=="2"){var url = JSON.parse(item.url);%>
                                  <select name="url" disabled  url=<%=item.url%>></select>
                                  <div class="control complete">
                                    <input class="search" type="text" name="salonName" disabled ajat-complete="salonAccount/getSalonName?salonname=${value}#domid=complete-position<%=i%>&tempid=/module/public/widget/autocomplete/shop" placeholder="店铺名称1~15个字" required
                                    autocomplete="off" value="<%=item.salonName%>" class="<%=url.type!='salon'?'hidden':''%>"/>
                                    <input type="hidden" class="salonId" name="salonId" value="<%=item.salonId%>" required>
                                    <div class="complete-position" id="complete-position<%=i%>"></div>
                                    <span class="control-help" style="display: none;">未填写</span>
                                  </div>                                    
                              <%}else{%>                                  
                                  <select name="url" disabled></select>
                                  <div class="control complete">
                                    <input class="search" type="text" name="salonName" disabled ajat-complete="salonAccount/getSalonName?salonname=${value}#domid=complete-position<%=i%>&tempid=/module/public/widget/autocomplete/shop" placeholder="店铺名称1~15个字"
                                    autocomplete="off" value="<%=item.salonName%>" required />
                                    <input type="hidden" class="salonId" name="salonId" value="<%=item.salonId%>" required>
                                    <div class="complete-position" id="complete-position<%=i%>"></div>
                                    <span class="control-help" style="display: none;">未填写</span>
                                  </div> 
                              <%}%>
                          </div>

                          <div class="radios">
                              <label class="radio">
                                  <input type="radio" name="behavior<%=i%>" value="0" <%=item.behavior=="0" ? "checked":""%> disabled/>
                                  <span>无跳转</span>
                              </label>
                          </div>
                      </li>
                  </ul>             
              </form>
            <%})%> 

            <%if(data.data && data.data.length < 10){%>          
            <div class="plus-button">
              <div style="text-align:center;height:100%;width:100%">
                  <button type="button" data-slug="banner.create">
                      <span style="font-size: 4rem;color:#ddd;">+</span><br>
                      <span style="font-size: 15px;color:#ddd;font-weight:900;">添加</span>
                  </button>
              </div>                
            </div>
            <%}%> 

            <form data-role="form" class="banner template" draggable="false" style="display:none">
                <ul>
                    <li class="clearfix">
                        <div class="fl"><h3><strong></strong></h3></div>
                        <div class="fr">
                            <button class='link save'>保存</button>
                            <button type="reset" class='link canncel'>取消</button>
                            <button type="button" class='link edit hidden'>编辑</button>
                            <a class='link del'>删除</a>
                            <input type="hidden" name="id" value="">
                            <input type="hidden" name="type" value="1">
                        </div>
                    </li>

                    <li>
                        <div class="thumbnails-item">
                            <div class="thumbnails-item-btn">
                                <button type="button" class="btn-primary uploader">上传</button>
                            </div>                                 
                        </div>                        
                    </li>

                    <li style="padding:0"><span class="control-help imageTip" style="display:none">请先上传图片</span></li>

                    <li class="inputBox">
                        <div class="radios">
                            <label><span>题目：</span></label>
                            <input id="title" type="text" name="name" placeholder="1~20个字符，必填" required maxLength="20"/>
                        </div>

                        <div class="radios">
                            <label class="radio">
                                <input type="radio" name="behavior" value="1" checked/>
                                <span>h5链接</span>
                            </label>

                            <input id="h5url" type="text" name="url" placeholder="输入h5链接地址，带http://"  required/>
                        </div>

                        <div class="radios">
                          <label class="radio">
                              <input type="radio" name="behavior" value="2" />
                              <span>App内部链接</span>
                          </label>

                          <select name="url" style="width:26.5%;" disabled></select>

                          <div class="control complete">
                            <input class="search" type="text" name="salonName" ajat-complete="salonAccount/getSalonName?salonname=${value}#domid=complete-position&tempid=/module/public/widget/autocomplete/shop" placeholder="店铺名称1~15个字" 
                              autocomplete="off" disabled required requiredmsg="未填写"/>
                            <input type="hidden" class="salonId" name="salonId" required>
                            <div class="complete-position" id="complete-position"></div>
                            <span class="control-help" style="display: none;">未填写</span>
                          </div>                             
                        </div>

                        <div class="radios">
                            <label class="radio">
                                <input type="radio" name="behavior" value="0"/>
                                <span>无跳转</span>
                            </label>
                        </div>
                    </li>
                </ul>             
            </form>                                                                               
            </script>            
        </div>
        <script src="homeBanner.js"></script>
    </body>
</html>