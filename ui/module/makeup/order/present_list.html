<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <title>臭美管理后台</title>
        <script type="text/javascript" src="/js/include.js"></script>
        <style type="text/css">
            .tc{
                text-align: center !important;
            }
        </style>
    </head>
    <body>
        <div class="breadcrumb">
            <a>韩式定妆</a><span>&gt;</span><a href="index.html">定妆单赠送查询</a>
            <div class="flex-box">
                <div class="flex-item">
                    <h4> 定妆赠送查询 </h4>
                </div>
            </div>
        </div>
        <div class="wrapper">
            <form data-role="hash">
              <div class="input-group input-switch">
                   <select name="selectItem">
                       <option value="0" data-placeholder="请输入手机号">手机号</option>
                       <option value="1" data-placeholder="请输入预约号">预约号</option>
                       <option value="2"
                        data-placeholder="请输入赠送卷号">赠送卷号</option>
                        <option value="2"    data-placeholder="请输入推荐号">推荐号</option>
                   </select>
                   <input type="text" class="input-search" name="mobilephone" placeholder="请输入手机号">
                   <input type="text" class="input-search" name="reservateSn" placeholder="请输入预约号">
                   <input type="text" class="input-search" name="recommendCode" placeholder="请输入赠送卷号">
                   <input type="text" class="input-search" name="ticketCode" placeholder="请输入推荐号">
               </div>
               <span class="space"></span>
               <!-- <span>活动时间：</span> -->
               <span class="date-group">
                   <input type="date" data-role="start" name="startTime" placeholder="YYYY-MM-DD"/>
                   至
                   <input type="date" data-role="end" name="endTime" placeholder="YYYY-MM-DD"/>
               </span>
              <span class="space"></span>
              <div class="input-group">
                   <select name="presentType">
                       <option value="0">赠送方式</option>
                       <option value="1" >消费赠送</option>
                       <option value="2" >推荐赠送</option>
                       <option value="3" >活动赠送</option>
                   </select>
               </div>
               <span class="space"></span>
               <div class="input-group">
                    <select name="ticketStatus">
                        <option value="0">状态</option>
                        <option value="1" >未使用</option>
                        <option value="2" >已使用</option>
                        <option value="3" >已过期</option>
                    </select>
                </div>

                <button class="btn" type="submit">查询</button>
            </form>
           <div class="table" ajat="PowderArticles/presentList?<%=query._%>#domid=table&tempid=table-t" id="table">
            <script type="text/template" id="table-t">
                <table>
                    <thead>
                        <tr>
                            <th>序号</th>
                            <th>手机号</th>
                            <th>赠送劵号</th>
                            <th>赠送项目</th>
                            <th>推荐码</th>
                            <th>赠送方式</th>
                            <th>赠送日期</th>
                            <th>有效期</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                <tbody>
                <%var data=data.data%>
                <%data.forEach(function(item,index){%>
                 <tr>
                  <td><%=index+1%></td>
                  <td><%=item.mobilephone%></td>
                  <td><%=item.ticketCode%></td>
                  <td><%=item.itemName%></td>
                  <td><%=item.recommendCode%></td>
                  <td><%=item.presentTypeName%></td>
                  <td><%=item.createdTime%></td>
                  <td><%=item.expireTime%></td>
                  <td><%=item.ticketStatusName%></td>
                  <td class="tc">
                    <a class="link" data-slug="coupon.actView" href="present_desc.html#id=<%=item.articleCodeId%>">查看</a>
                  </td>
                  </tr>
                  <%})%>
                </tbody>
            </table>
             <div class="pager"> </div>
            </script>
            <script type="text/javascript">

               var clearTmpData  = function(){
                   window.localStorage.removeItem('couponTmpData');
               }

               var confirmBox = function(options){
                    lib.popup.confirm({
                        text:options.text,
                        define: function(){
                            lib.ajax({
                                url : options.url+options.id
                            }).done(function(data, status, xhr){
                                if(data.result == 1){
                                    parent.lib.popup.result({
                                        text:options.resultText,
                                        define:function(){
                                            location.reload();
                                        }
                                    });
                                }
                            });
                        }
                    });
               }
               var confirmBoxConfig = {
                    'offline':{
                        text:'确定将该活动下线吗？',
                        url:'coupon/offlineConf/',
                        resultText:'活动下线成功'
                    },
                    'online':{
                        text:'确定将该活动上线吗？',
                        url:'coupon/upConf/',
                        resultText:'活动正在上线中...'
                    },
                    'close':{
                        text:'确定将该活动关闭吗？',
                        url:'coupon/closeConf/',
                        resultText:'活动关闭成功'
                    }
               }
               $('body').on('click','#offline',function(){
                    var id = $(this).attr('data-id');
                    confirmBoxConfig['offline'].id = id;
                    confirmBox(confirmBoxConfig['offline']);

               }).on('click','#online',function(){
                    var id = $(this).attr('data-id');
                    confirmBoxConfig['online'].id = id;
                    confirmBox(confirmBoxConfig['online']);

               }).on('click','#close',function(){
                    var id = $(this).attr('data-id');
                    confirmBoxConfig['close'].id = id;
                    confirmBox(confirmBoxConfig['close']);
               }).on('click','#add_new',function(){
                    clearTmpData();
                    window.location.href="addBase.html";
               });
            </script>
        </div>
            </div>
    </body>
</html>
